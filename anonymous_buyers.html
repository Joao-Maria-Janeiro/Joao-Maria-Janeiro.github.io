<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/df6431e323547add1b4cf45992913f15286456d3/devicon.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <style media="screen">
    .pimg1{
      background-image:url(img/landing.jpg);
      width: 100%;
      height: 200px;
    }
    .tittlez{
      text-align: center;
    }
    .pimg1 {
    position: relative;
    }
    .ptext {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .ptext h3, p{
      color: #000000;
    }

    .topz{
      margin-top: 100px;
    }

    @media screen and (max-width: 960px) {
      .first {
        margin-top: 200px;
      }
      .topz{
        margin-top: 0px;
      }
      .topz img{
        margin-top: 100px;
      }
      .card{
        margin-left: 50px;
      }
    }

    </style>
  </head>
  <body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="index.html">
        <img class="rounded-circle" src="./img/profile.jpg" width="40" height="40" alt="">
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="projects.html">Projects</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="experiences.html">Experiences</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="writings.html">Writings</a>
          </li>
        </ul>
      </div>
    </nav>


  <br><br>
  <div class="container">
    <h1 style="text-align:center;">How did I go about handling anonymous buyers?</h1>
    <br><br>

    <h3 style="text-align:center;">My prefered options</h3>
    <p>After some research I ended up with a couple of ways to handle users not logged in (anonymous users/anonymous buyers).</p>
    <p>
      • One of them was to use localStorage and create a user or just the user’s cart and saving the user’s id or the user’s token on the browser with LocalStorage and every time the user added an item to the cart or anything relating to its data I simply sent the id (or token) from the browser to the back end using AJAX. <br>
      • One other option was to use cookies or sessions which was similar to LocalStorage, always sending the information to the back end. <br>
      • The last way was to create a regular user and pass its data through the requests.<br>
    </p>

    <h3 style="text-align:center;">My pick</h3>
    <p>I ended up choosing the last one. Since most of my backends are done using Django, the users come in the request and I don’t need to add anything in the frontend or handle any unnecessary thing in the backend. I simply pass the request as an argument in the view functions and do a “request.user” to get the current user.</p>

    <h3 style="text-align:center;">What authorizations does this user have?</h3>
    <p>Is this actually a regular user? Well yes and no…. It is just another user entry in the database so in a sense it is a regular user upon creation but then it can not do most of the things a user can. So what I did is, on each view that was only for users I would logout and/or delete the anonymous user and request the person to sing in or create an account. So if you were on the website with an anonymous user and you clicked log in, you would have the login page displayed and your anonymous user logged out and deleted. <br>
      As far as the user goes he doesn’t know that he has an anonymous user because when he browses the website all the user’s features redirect to the login page. 
    </p>
    
    <h3 style="text-align:center;">How do I generate this user?</h3>
    <p>This anonymous user is created with a randomly generated string as its username and email (this makes the chances of having an error due to repeated usernames quite small, even less because users are deleted every 2h). In the user model I simply added an anonymous_user boolean field so I know if the user is anonymous and everything else is the same as a regular user. </p>

    <h3 style="text-align:center;">Conclusions</h3>
    <p>As I see it using a regular user, setting its anonymous_user flag to True and restrict its access is the simplest and cleanest way. It’s probably not the prettiest but it works well enough.</p>
    
  </div>


<footer> <center>
  <a style="color:gray;" href="https://github.com/Joao-Maria-Janeiro"><i style="font-size: 1.6em;" class="fab fa-github"></i></a>
  <a style="color:gray;" href="https://www.linkedin.com/in/joaomariajaneiro/"><i style="font-size: 1.6em;" class="fab fa-linkedin"></i></a>
</center></footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://platform.linkedin.com/badges/js/profile.js" async defer></script>
<script defer src="https://use.fontawesome.com/releases/v5.7.2/js/all.js" integrity="sha384-0pzryjIRos8mFBWMzSSZApWtPl/5++eIfzYmTgBBmXYdhvxPc+XcFEk+zJwDgWbP" crossorigin="anonymous"></script>
  </body>
</html>
